import React, { createContext, useContext, useEffect, useMemo, useState } from 'react';

export type LanguageCode = 'en' | 'hi' | 'ar';

type Dictionary = Record<string, string>;

const dictionaries: Record<LanguageCode, Dictionary> = {
  en: {
    'nav.dashboard': 'Dashboard',
    'nav.ai_chat': 'AI Chat',
    'nav.appointments': 'Appointments',
    'nav.find_doctor': 'Find Doctor',
    'nav.medicine': '10-Min Medicine',
    'nav.video_call': 'Video Call',
    'nav.family': 'Family',
    'nav.ai_insights': 'AI Insights',
    'nav.languages': 'Languages',
    'nav.profile': 'Profile',
    'nav.emergency_sos': 'Emergency SOS',
    'nav.ambulance_dashboard': 'Ambulance Dashboard',
    'nav.prescriptions': 'Prescriptions',
    'nav.freelance_patient': 'Freelance Doctor',
    'nav.freelance_doctor': 'Freelance Mode',

    'freelance.common.connected': 'Connected',
    'freelance.common.disconnected': 'Disconnected',
    'freelance.common.not_connected': 'Not connected',
    'freelance.common.location_required': 'Location is required',
    'freelance.common.waiting_location': 'Waiting for location...',

    'freelance.patient.title': 'Freelance Doctor (LIVE)',
    'freelance.patient.subtitle': 'Request a nearby doctor and get matched in real time.',
    'freelance.patient.map_title': 'Live area view',
    'freelance.patient.symptoms_label': 'Symptoms (optional)',
    'freelance.patient.symptoms_placeholder': 'e.g. fever, cough, headache',
    'freelance.patient.symptoms_hint': 'Tip: separate multiple symptoms with commas.',
    'freelance.patient.request': 'Request doctor',
    'freelance.patient.requesting': 'Requesting...',
    'freelance.patient.cancel': 'Cancel',
    'freelance.patient.cancelling': 'Cancelling...',
    'freelance.patient.status_title': 'Request status',
    'freelance.patient.status_line': 'Current status: {status}',
    'freelance.patient.no_active': 'No active request. Create one to match with a nearby doctor.',
    'freelance.patient.flow_title': 'How it works',
    'freelance.patient.flow_copy': '1) Share your location\n2) Send a request\n3) Nearby doctors get notified\n4) A doctor accepts and you get assigned',
    'freelance.patient.nearby_line': 'Nearby online doctors: {count}',
    'freelance.patient.request_created': 'Request created',
    'freelance.patient.request_failed': 'Failed to create request',
    'freelance.patient.cancelled': 'Request cancelled',
    'freelance.patient.cancel_failed': 'Failed to cancel request',
    'freelance.patient.assigned': 'Doctor assigned',

    'freelance.doctor.title': 'Freelance Mode',
    'freelance.doctor.subtitle': 'Go online to receive nearby patient requests and accept instantly.',
    'freelance.doctor.location_title': 'Your live location',
    'freelance.doctor.go_online': 'Go online',
    'freelance.doctor.go_offline': 'Go offline',
    'freelance.doctor.online': 'Online',
    'freelance.doctor.offline': 'Offline',
    'freelance.doctor.online_failed': 'Failed to go online',
    'freelance.doctor.offline_failed': 'Failed to go offline',
    'freelance.doctor.new_offer': 'New nearby request',
    'freelance.doctor.offers_title': 'Incoming requests',
    'freelance.doctor.offers_count': '{count} offer(s)',
    'freelance.doctor.no_offers': 'No requests yet. Stay online to receive offers.',
    'freelance.doctor.offer_request': 'Request {id}',
    'freelance.doctor.offer_distance': '{km} km away',
    'freelance.doctor.no_symptoms': 'No symptoms provided',
    'freelance.doctor.accept': 'Accept',
    'freelance.doctor.accept_failed': 'Failed to accept request',
    'freelance.doctor.assigned': 'Assigned to request',
    'freelance.doctor.active_title': 'Active assignment',
    'freelance.doctor.active_line': 'You are assigned to request {id}',
    'freelance.doctor.status_line': 'Status: {status}',
    'freelance.doctor.no_active': 'No active assignment',
    'freelance.doctor.complete': 'Complete',
    'freelance.doctor.completed': 'Completed',
    'freelance.doctor.complete_failed': 'Failed to complete request',

    'prescriptions.title': 'Prescription Upload',
    'prescriptions.subtitle': 'Upload a prescription (image/PDF) and extract medicines using AI.',
    'prescriptions.load_failed': 'Failed to load prescription uploads',
    'prescriptions.upload': 'Upload',
    'prescriptions.uploading': 'Uploading...',
    'prescriptions.upload_success': 'Uploaded successfully',
    'prescriptions.upload_failed': 'Upload failed',
    'prescriptions.extract': 'Extract',
    'prescriptions.extracting': 'Extracting...',
    'prescriptions.extract_success': 'Extraction completed',
    'prescriptions.extract_failed': 'Extraction failed',
    'prescriptions.delete': 'Delete',
    'prescriptions.delete_success': 'Deleted',
    'prescriptions.delete_failed': 'Delete failed',
    'prescriptions.view_file': 'View file',
    'prescriptions.empty_title': 'No prescription uploads yet',
    'prescriptions.empty_subtitle': 'Upload a prescription to extract medicines and instructions.',
    'prescriptions.status.uploaded': 'Uploaded',
    'prescriptions.status.extracting': 'Extracting',
    'prescriptions.status.extracted': 'Extracted',
    'prescriptions.status.failed': 'Failed',
    'prescriptions.extracted_medicines': 'Extracted medicines',
    'prescriptions.no_medicines_found': 'No medicines found in this document',
    'prescriptions.unknown_medicine': 'Unknown medicine',
    'prescriptions.no_details': 'No dosage/frequency details',
    'prescriptions.raw_extraction': 'Raw extraction',

    'medicine.title': '10-Min Medicine Delivery',
    'medicine.subtitle': 'Order essentials from nearby pharmacies with live tracking and ETA.',
    'medicine.load_failed': 'Failed to load products',
    'medicine.search_placeholder': 'Search medicines, brands, categories...',
    'medicine.filters': 'Filters',
    'medicine.category': 'Category',
    'medicine.all_categories': 'All categories',
    'medicine.rx_only': 'Show prescription-only medicines',
    'medicine.tip': 'Tip: For the best ETA, enable location in checkout.',
    'medicine.empty_title': 'No products found',
    'medicine.empty_subtitle': 'Try changing search or filters.',
    'medicine.rx': 'Rx',
    'medicine.in_stock': 'In stock',
    'medicine.out_of_stock': 'Out of stock',
    'medicine.eta_minutes': 'ETA {count} min',
    'medicine.add_to_cart': 'Add to cart',
    'medicine.cart_items': 'Cart ({count})',
    'medicine.cart': 'Cart',
    'medicine.checkout': 'Checkout',
    'medicine.checkout_subtitle': 'Review cart, confirm location, and place your order.',
    'medicine.back_to_catalog': 'Back to catalog',
    'medicine.cart_empty_title': 'Your cart is empty',
    'medicine.cart_empty_subtitle': 'Add items to place a 10-minute delivery order.',
    'medicine.shop_now': 'Shop now',
    'medicine.delivery_location': 'Delivery location',
    'medicine.locating': 'Locating...',
    'medicine.refresh_location': 'Refresh',
    'medicine.location_missing': 'Location not available',
    'medicine.delivery_address': 'Delivery address',
    'medicine.address_line1': 'House / Street / Area',
    'medicine.address_landmark': 'Landmark (optional)',
    'medicine.address_city': 'City',
    'medicine.address_state': 'State',
    'medicine.address_pincode': 'Pincode',
    'medicine.address_note': 'Delivery note (optional)',
    'medicine.subtotal': 'Subtotal',
    'medicine.place_order': 'Place order',
    'medicine.placing_order': 'Placing order...',
    'medicine.checkout_note': 'ETA is estimated and may vary based on inventory and distance.',
    'medicine.geo_not_supported': 'Geolocation not supported',
    'medicine.geo_ok': 'Location captured',
    'medicine.geo_denied': 'Location permission denied',
    'medicine.fill_required': 'Please fill required address fields and allow location',
    'medicine.order_created': 'Order created',
    'medicine.order_failed': 'Failed to place order',
    'medicine.order_load_failed': 'Failed to load order',
    'medicine.order_not_found': 'Order not found',
    'medicine.order_not_found_subtitle': 'This order may not exist or you may not have access.',
    'medicine.tracking_title': 'Live Order Tracking',
    'medicine.order_id': 'Order ID: {id}',
    'medicine.refresh': 'Refresh',
    'medicine.refreshing': 'Refreshing...',
    'medicine.shop_more': 'Shop more',
    'medicine.status': 'Status',
    'medicine.status.pending': 'Pending',
    'medicine.status.confirmed': 'Confirmed',
    'medicine.status.preparing': 'Preparing',
    'medicine.status.out_for_delivery': 'Out for delivery',
    'medicine.status.delivered': 'Delivered',
    'medicine.status.cancelled': 'Cancelled',
    'medicine.cancel_order': 'Cancel order',
    'medicine.cancelling': 'Cancelling...',
    'medicine.order_cancelled': 'Order cancelled',
    'medicine.cancel_failed': 'Failed to cancel order',
    'medicine.eta_line': 'Estimated delivery in {minutes} minutes',
    'medicine.eta_by': 'By {time}',
    'medicine.pharmacy': 'Pharmacy',
    'medicine.pharmacy_unknown': 'Assigned pharmacy',
    'medicine.total': 'Total',
    'medicine.items': 'Items',
    'medicine.qty_price': '{qty} × ₹{price}',

    'auth.login': 'Login',
    'auth.register': 'Register',
    'auth.logout': 'Logout',

    'i18n.language': 'Language',

    'loading.doctor_dashboard': 'Loading your dashboard...',
    'loading.admin_dashboard': 'Loading admin dashboard...',
    'loading.appointments': 'Loading appointments...',

    'doctor.greeting': 'Good morning, Dr. {name}!',
    'doctor.subtitle': 'You have {count} appointments today. Your AI assistant is ready to help.',
    'doctor.todays_appointments': "Today's Appointments",
    'doctor.total_patients': 'Total Patients',
    'doctor.satisfaction_score': 'Satisfaction Score',
    'doctor.success_rate': 'Success Rate',
    'doctor.patient_demographics': 'Patient Demographics',
    'doctor.common_conditions': 'Common Conditions',
    'doctor.attention_required': 'Attention Required',
    'doctor.critical_cases': 'Critical Cases',
    'doctor.followups_required': 'Follow-ups Required',
    'doctor.patients': 'patients',

    'admin.title': 'Admin Dashboard - {name}',
    'admin.subtitle': 'Monitor platform health, manage users, and ensure system security.',
    'admin.critical_alerts_title': 'Critical Alerts Require Attention',
    'admin.critical_alerts_subtitle': '{count} critical system alert{plural} need immediate attention.',
    'admin.total_users': 'Total Users',
    'admin.verified_doctors': 'Verified Doctors',
    'admin.pending_verifications': 'Pending Verifications',
    'admin.system_uptime': 'System Uptime',
    'admin.system_alerts': 'System Alerts',
    'admin.fraud_detection': 'Fraud Detection',
    'admin.view_all': 'View all',
    'admin.all_systems_operational': 'All systems operational',
    'admin.no_alerts': 'No alerts at this time',
    'admin.no_fraud_alerts': 'No fraud alerts',
    'admin.system_secure': 'System is secure',
    'admin.resolved': 'Resolved',

    'appointments.title': 'Appointments',
    'appointments.subtitle_patient': 'Manage your healthcare appointments and book new consultations',
    'appointments.subtitle_doctor': 'View and manage your patient appointments',
    'appointments.book': 'Book Appointment',
    'appointments.search_placeholder': 'Search appointments...',
    'appointments.all_status': 'All Status',
    'appointments.scheduled': 'Scheduled',
    'appointments.in_progress': 'In Progress',
    'appointments.completed': 'Completed',
    'appointments.cancelled': 'Cancelled',
    'appointments.found': '{count} appointment{plural} found',
    'appointments.none_title': 'No appointments found',
    'appointments.none_patient': "You don't have any appointments yet. Book your first consultation!",
    'appointments.none_filters': 'No appointments match your current filters.',
    'appointments.book_first': 'Book Your First Appointment',
    'appointments.duration': 'Duration',
    'appointments.minutes': 'min',
    'appointments.specialization': 'Specialization',
    'appointments.symptoms': 'Symptoms',

    'ai.title': 'AI Health Assistant',
    'ai.subtitle': 'Chat with your personal AI health assistant',
    'ai.connected': 'Connected',
    'ai.disconnected': 'Disconnected',
    'ai.welcome_title': 'Welcome to AuraMed AI',
    'ai.welcome_subtitle': 'Start a conversation about your health concerns',
    'ai.thinking': 'AI is thinking...',
    'ai.placeholder': 'Describe your symptoms or ask a health question...',
    'ai.risk_assessment': 'Risk Assessment',
    'ai.separate_symptoms_hint': 'Separate multiple symptoms with commas',
    'ai.analyze_symptoms': 'Analyze Symptoms',

    'common.view_all': 'View all',
    'common.at': 'at',
    'common.unread': 'Unread',
    'common.mark_as_read': 'Mark as read',
    'common.risk': 'Risk',
    'common.na': 'N/A',
    'common.bpm': 'bpm',

    'patient.welcome': 'Welcome back, {name}!',
    'patient.subtitle': 'Your AI-powered health assistant is here to help you manage your wellness journey.',
    'patient.quick.ai_chat': 'AI Health Chat',
    'patient.quick.ai_chat_sub': 'Get instant health guidance',
    'patient.quick.book_appointment': 'Book Appointment',
    'patient.quick.book_appointment_sub': 'Schedule with top doctors',
    'patient.quick.emergency': 'Emergency',
    'patient.quick.emergency_sub': 'Urgent consultation',
    'patient.recent_appointments': 'Recent Appointments',
    'patient.no_appointments': 'No appointments yet',
    'patient.book_first': 'Book your first appointment',
    'patient.health_insights': 'Health Insights',
    'patient.no_insights': 'No health insights yet',
    'patient.no_insights_sub': 'Start chatting with AI to get personalized insights',

    'patient.health_score': 'Health Score',
    'patient.overall_health_score': 'Overall Health Score',
    'patient.stable': 'Stable',
    'patient.vital_signs': 'Vital Signs',
    'patient.blood_pressure': 'Blood Pressure',
    'patient.heart_rate': 'Heart Rate',
    'patient.bmi': 'BMI',
    'patient.last_checkup': 'Last Checkup',
    'patient.quick_stats': 'Quick Stats',
    'patient.visits': 'Visits',
    'patient.upcoming': 'Upcoming',
    'patient.medications': 'Medications',
    'patient.conditions': 'Conditions',
    'patient.medications_allergies': 'Medications & Allergies',
    'patient.current_medications': 'Current Medications',
    'patient.no_medications_recorded': 'No medications recorded',
    'patient.known_allergies': 'Known Allergies',
    'patient.no_allergies_recorded': 'No allergies recorded',
    'patient.risk_factors': 'Risk Factors',
    'patient.no_risk_factors': 'No significant risk factors identified',

    'doctor.monthly_growth': 'Monthly Growth',
    'doctor.new_patients_this_month': 'New patients this month',
    'doctor.growth_caption': 'Growing patient base indicates excellent care quality',
    'doctor.todays_schedule': "Today's Schedule",
    'doctor.no_appointments_today': 'No appointments today',
    'doctor.enjoy_day_off': 'Enjoy your day off!',
    'doctor.performance_metrics': 'Performance Metrics',
    'doctor.view_all': 'View all',
    'doctor.age': 'Age',
    'doctor.symptoms': 'Symptoms',
    'doctor.patient_satisfaction': 'Patient Satisfaction',
    'doctor.response_time_score': 'Response Time Score',
    'doctor.treatment_success_rate': 'Treatment Success Rate',
    'doctor.avg_consultation_time': 'Avg. Consultation Time',
    'doctor.no_metrics': 'No metrics available yet',
    'doctor.no_metrics_sub': 'Complete consultations to see your performance',
    'doctor.upcoming_appointments': 'Upcoming Appointments',
    'doctor.quick_actions': 'Quick Actions',
    'doctor.ai_assistant': 'AI Assistant',
    'doctor.ai_assistant_sub': 'Get AI-powered insights',
    'doctor.manage_schedule': 'Manage Schedule',
    'doctor.manage_schedule_sub': 'Update availability',
    'doctor.view_reports': 'View Reports',
    'doctor.view_reports_sub': 'Performance analytics'
  },
  hi: {
    'nav.dashboard': 'डैशबोर्ड',
    'nav.ai_chat': 'एआई चैट',
    'nav.appointments': 'अपॉइंटमेंट',
    'nav.find_doctor': 'डॉक्टर खोजें',
    'nav.medicine': '10-मिनट दवा',
    'nav.video_call': 'वीडियो कॉल',
    'nav.family': 'परिवार',
    'nav.ai_insights': 'एआई इनसाइट्स',
    'nav.languages': 'भाषाएँ',
    'nav.profile': 'प्रोफ़ाइल',
    'nav.emergency_sos': 'आपातकाल SOS',
    'nav.ambulance_dashboard': 'एम्बुलेंस डैशबोर्ड',
    'nav.prescriptions': 'प्रिस्क्रिप्शन',
    'nav.freelance_patient': 'फ्रीलांस डॉक्टर',
    'nav.freelance_doctor': 'फ्रीलांस मोड',

    'freelance.common.connected': 'कनेक्टेड',
    'freelance.common.disconnected': 'डिस्कनेक्टेड',
    'freelance.common.not_connected': 'कनेक्शन नहीं है',
    'freelance.common.location_required': 'लोकेशन आवश्यक है',
    'freelance.common.waiting_location': 'लोकेशन का इंतज़ार...',

    'freelance.patient.title': 'फ्रीलांस डॉक्टर (LIVE)',
    'freelance.patient.subtitle': 'नज़दीकी डॉक्टर को रिक्वेस्ट करें और रियल‑टाइम में मैच हों।',
    'freelance.patient.map_title': 'लाइव एरिया व्यू',
    'freelance.patient.symptoms_label': 'लक्षण (वैकल्पिक)',
    'freelance.patient.symptoms_placeholder': 'जैसे बुखार, खाँसी, सिरदर्द',
    'freelance.patient.symptoms_hint': 'टिप: कई लक्षणों को कॉमा से अलग करें।',
    'freelance.patient.request': 'डॉक्टर रिक्वेस्ट करें',
    'freelance.patient.requesting': 'रिक्वेस्ट हो रही है...',
    'freelance.patient.cancel': 'कैंसल',
    'freelance.patient.cancelling': 'कैंसल हो रहा है...',
    'freelance.patient.status_title': 'रिक्वेस्ट स्टेटस',
    'freelance.patient.status_line': 'वर्तमान स्टेटस: {status}',
    'freelance.patient.no_active': 'कोई एक्टिव रिक्वेस्ट नहीं। मैच होने के लिए रिक्वेस्ट बनाएं।',
    'freelance.patient.flow_title': 'कैसे काम करता है',
    'freelance.patient.flow_copy': '1) लोकेशन शेयर करें\n2) रिक्वेस्ट भेजें\n3) नज़दीकी डॉक्टरों को नोटिफाई किया जाएगा\n4) डॉक्टर स्वीकार करेगा और असाइन हो जाएगा',
    'freelance.patient.nearby_line': 'नज़दीकी ऑनलाइन डॉक्टर: {count}',
    'freelance.patient.request_created': 'रिक्वेस्ट बन गई',
    'freelance.patient.request_failed': 'रिक्वेस्ट नहीं बन पाई',
    'freelance.patient.cancelled': 'रिक्वेस्ट कैंसल हो गई',
    'freelance.patient.cancel_failed': 'रिक्वेस्ट कैंसल नहीं हो पाई',
    'freelance.patient.assigned': 'डॉक्टर असाइन हो गया',

    'freelance.doctor.title': 'फ्रीलांस मोड',
    'freelance.doctor.subtitle': 'ऑनलाइन होकर नज़दीकी मरीजों की रिक्वेस्ट पाएँ और तुरंत स्वीकार करें।',
    'freelance.doctor.location_title': 'आपकी लाइव लोकेशन',
    'freelance.doctor.go_online': 'ऑनलाइन जाएँ',
    'freelance.doctor.go_offline': 'ऑफलाइन जाएँ',
    'freelance.doctor.online': 'ऑनलाइन',
    'freelance.doctor.offline': 'ऑफलाइन',
    'freelance.doctor.online_failed': 'ऑनलाइन नहीं हो पाया',
    'freelance.doctor.offline_failed': 'ऑफलाइन नहीं हो पाया',
    'freelance.doctor.new_offer': 'नई नज़दीकी रिक्वेस्ट',
    'freelance.doctor.offers_title': 'आने वाली रिक्वेस्ट',
    'freelance.doctor.offers_count': '{count} रिक्वेस्ट',
    'freelance.doctor.no_offers': 'अभी कोई रिक्वेस्ट नहीं। ऑफर पाने के लिए ऑनलाइन रहें।',
    'freelance.doctor.offer_request': 'रिक्वेस्ट {id}',
    'freelance.doctor.offer_distance': '{km} किमी दूर',
    'freelance.doctor.no_symptoms': 'कोई लक्षण नहीं',
    'freelance.doctor.accept': 'स्वीकार करें',
    'freelance.doctor.accept_failed': 'रिक्वेस्ट स्वीकार नहीं हो पाई',
    'freelance.doctor.assigned': 'रिक्वेस्ट असाइन हो गई',
    'freelance.doctor.active_title': 'एक्टिव असाइनमेंट',
    'freelance.doctor.active_line': 'आप रिक्वेस्ट {id} पर असाइन हैं',
    'freelance.doctor.status_line': 'स्टेटस: {status}',
    'freelance.doctor.no_active': 'कोई एक्टिव असाइनमेंट नहीं',
    'freelance.doctor.complete': 'पूर्ण करें',
    'freelance.doctor.completed': 'पूरा हो गया',
    'freelance.doctor.complete_failed': 'रिक्वेस्ट पूरी नहीं हो पाई',

    'prescriptions.title': 'प्रिस्क्रिप्शन अपलोड',
    'prescriptions.subtitle': 'प्रिस्क्रिप्शन (इमेज/PDF) अपलोड करें और AI से दवाएँ निकालें।',
    'prescriptions.load_failed': 'अपलोडेड प्रिस्क्रिप्शन लोड नहीं हो पाए',
    'prescriptions.upload': 'अपलोड',
    'prescriptions.uploading': 'अपलोड हो रहा है...',
    'prescriptions.upload_success': 'सफलतापूर्वक अपलोड हुआ',
    'prescriptions.upload_failed': 'अपलोड विफल',
    'prescriptions.extract': 'एक्सट्रैक्ट',
    'prescriptions.extracting': 'एक्सट्रैक्ट हो रहा है...',
    'prescriptions.extract_success': 'एक्सट्रैक्शन पूरा हुआ',
    'prescriptions.extract_failed': 'एक्सट्रैक्शन विफल',
    'prescriptions.delete': 'डिलीट',
    'prescriptions.delete_success': 'डिलीट हो गया',
    'prescriptions.delete_failed': 'डिलीट विफल',
    'prescriptions.view_file': 'फ़ाइल देखें',
    'prescriptions.empty_title': 'अभी कोई प्रिस्क्रिप्शन अपलोड नहीं',
    'prescriptions.empty_subtitle': 'दवाएँ निकालने के लिए प्रिस्क्रिप्शन अपलोड करें।',
    'prescriptions.status.uploaded': 'अपलोडेड',
    'prescriptions.status.extracting': 'एक्सट्रैक्टिंग',
    'prescriptions.status.extracted': 'एक्सट्रैक्टेड',
    'prescriptions.status.failed': 'विफल',
    'prescriptions.extracted_medicines': 'निकाली गई दवाएँ',
    'prescriptions.no_medicines_found': 'इस डॉक्युमेंट में दवाएँ नहीं मिलीं',
    'prescriptions.unknown_medicine': 'अज्ञात दवा',
    'prescriptions.no_details': 'डोज/फ्रीक्वेंसी विवरण नहीं',
    'prescriptions.raw_extraction': 'रॉ एक्सट्रैक्शन',

    'medicine.title': '10-मिनट दवा डिलीवरी',
    'medicine.subtitle': 'नज़दीकी फ़ार्मेसी से ज़रूरी दवाएँ मंगाएँ — लाइव ट्रैकिंग और ETA के साथ।',
    'medicine.load_failed': 'प्रोडक्ट लोड नहीं हो पाए',
    'medicine.search_placeholder': 'दवा, ब्रांड, कैटेगरी खोजें...',
    'medicine.filters': 'फिल्टर',
    'medicine.category': 'कैटेगरी',
    'medicine.all_categories': 'सभी कैटेगरी',
    'medicine.rx_only': 'केवल प्रिस्क्रिप्शन वाली दवाएँ दिखाएँ',
    'medicine.tip': 'टिप: बेहतर ETA के लिए चेकआउट में लोकेशन ऑन रखें।',
    'medicine.empty_title': 'कोई प्रोडक्ट नहीं मिला',
    'medicine.empty_subtitle': 'सर्च या फिल्टर बदलकर देखें।',
    'medicine.rx': 'Rx',
    'medicine.in_stock': 'उपलब्ध',
    'medicine.out_of_stock': 'स्टॉक नहीं',
    'medicine.eta_minutes': 'ETA {count} मिनट',
    'medicine.add_to_cart': 'कार्ट में जोड़ें',
    'medicine.cart_items': 'कार्ट ({count})',
    'medicine.cart': 'कार्ट',
    'medicine.checkout': 'चेकआउट',
    'medicine.checkout_subtitle': 'कार्ट देखें, लोकेशन कन्फर्म करें और ऑर्डर करें।',
    'medicine.back_to_catalog': 'कैटलॉग पर वापस',
    'medicine.cart_empty_title': 'आपकी कार्ट खाली है',
    'medicine.cart_empty_subtitle': '10-मिनट डिलीवरी के लिए आइटम जोड़ें।',
    'medicine.shop_now': 'अभी खरीदें',
    'medicine.delivery_location': 'डिलीवरी लोकेशन',
    'medicine.locating': 'लोकेशन मिल रही है...',
    'medicine.refresh_location': 'रीफ्रेश',
    'medicine.location_missing': 'लोकेशन उपलब्ध नहीं',
    'medicine.delivery_address': 'डिलीवरी पता',
    'medicine.address_line1': 'घर / गली / एरिया',
    'medicine.address_landmark': 'लैंडमार्क (वैकल्पिक)',
    'medicine.address_city': 'शहर',
    'medicine.address_state': 'राज्य',
    'medicine.address_pincode': 'पिनकोड',
    'medicine.address_note': 'डिलीवरी नोट (वैकल्पिक)',
    'medicine.subtotal': 'सबटोटल',
    'medicine.place_order': 'ऑर्डर करें',
    'medicine.placing_order': 'ऑर्डर किया जा रहा है...',
    'medicine.checkout_note': 'ETA अनुमानित है और दूरी/स्टॉक के अनुसार बदल सकता है।',
    'medicine.geo_not_supported': 'जियोलोकेशन सपोर्ट नहीं है',
    'medicine.geo_ok': 'लोकेशन सेव हो गई',
    'medicine.geo_denied': 'लोकेशन की अनुमति नहीं मिली',
    'medicine.fill_required': 'कृपया पता भरें और लोकेशन की अनुमति दें',
    'medicine.order_created': 'ऑर्डर बन गया',
    'medicine.order_failed': 'ऑर्डर नहीं हो पाया',
    'medicine.order_load_failed': 'ऑर्डर लोड नहीं हो पाया',
    'medicine.order_not_found': 'ऑर्डर नहीं मिला',
    'medicine.order_not_found_subtitle': 'यह ऑर्डर मौजूद नहीं है या आपकी पहुँच नहीं है।',
    'medicine.tracking_title': 'लाइव ऑर्डर ट्रैकिंग',
    'medicine.order_id': 'ऑर्डर ID: {id}',
    'medicine.refresh': 'रीफ्रेश',
    'medicine.refreshing': 'रीफ्रेश हो रहा है...',
    'medicine.shop_more': 'और खरीदें',
    'medicine.status': 'स्टेटस',
    'medicine.status.pending': 'पेंडिंग',
    'medicine.status.confirmed': 'कन्फर्म',
    'medicine.status.preparing': 'तैयार हो रहा है',
    'medicine.status.out_for_delivery': 'डिलीवरी के लिए निकला',
    'medicine.status.delivered': 'डिलीवर हो गया',
    'medicine.status.cancelled': 'कैंसल',
    'medicine.cancel_order': 'ऑर्डर कैंसल करें',
    'medicine.cancelling': 'कैंसल हो रहा है...',
    'medicine.order_cancelled': 'ऑर्डर कैंसल हो गया',
    'medicine.cancel_failed': 'ऑर्डर कैंसल नहीं हो पाया',
    'medicine.eta_line': 'अनुमानित डिलीवरी {minutes} मिनट में',
    'medicine.eta_by': '{time} तक',
    'medicine.pharmacy': 'फ़ार्मेसी',
    'medicine.pharmacy_unknown': 'असाइन्ड फ़ार्मेसी',
    'medicine.total': 'कुल',
    'medicine.items': 'आइटम',
    'medicine.qty_price': '{qty} × ₹{price}',

    'auth.login': 'लॉगिन',
    'auth.register': 'रजिस्टर',
    'auth.logout': 'लॉगआउट',

    'i18n.language': 'भाषा',

    'loading.doctor_dashboard': 'डैशबोर्ड लोड हो रहा है...',
    'loading.admin_dashboard': 'एडमिन डैशबोर्ड लोड हो रहा है...',
    'loading.appointments': 'अपॉइंटमेंट लोड हो रहे हैं...',

    'doctor.greeting': 'सुप्रभात, डॉ. {name}!',
    'doctor.subtitle': 'आज आपके {count} अपॉइंटमेंट हैं। आपका AI सहायक मदद के लिए तैयार है।',
    'doctor.todays_appointments': 'आज के अपॉइंटमेंट',
    'doctor.total_patients': 'कुल मरीज',
    'doctor.satisfaction_score': 'संतुष्टि स्कोर',
    'doctor.success_rate': 'सफलता दर',
    'doctor.patient_demographics': 'मरीज जनसांख्यिकी',
    'doctor.common_conditions': 'सामान्य समस्याएँ',
    'doctor.attention_required': 'ध्यान आवश्यक',
    'doctor.critical_cases': 'गंभीर मामले',
    'doctor.followups_required': 'फॉलो-अप आवश्यक',
    'doctor.patients': 'मरीज',

    'admin.title': 'एडमिन डैशबोर्ड - {name}',
    'admin.subtitle': 'प्लेटफ़ॉर्म की स्थिति देखें, उपयोगकर्ताओं को प्रबंधित करें और सुरक्षा सुनिश्चित करें।',
    'admin.critical_alerts_title': 'गंभीर अलर्ट पर ध्यान दें',
    'admin.critical_alerts_subtitle': '{count} गंभीर सिस्टम अलर्ट{plural} पर तुरंत कार्रवाई आवश्यक है।',
    'admin.total_users': 'कुल उपयोगकर्ता',
    'admin.verified_doctors': 'सत्यापित डॉक्टर',
    'admin.pending_verifications': 'लंबित सत्यापन',
    'admin.system_uptime': 'सिस्टम अपटाइम',
    'admin.system_alerts': 'सिस्टम अलर्ट',
    'admin.fraud_detection': 'धोखाधड़ी पहचान',
    'admin.view_all': 'सभी देखें',
    'admin.all_systems_operational': 'सभी सिस्टम सामान्य',
    'admin.no_alerts': 'इस समय कोई अलर्ट नहीं',
    'admin.no_fraud_alerts': 'कोई धोखाधड़ी अलर्ट नहीं',
    'admin.system_secure': 'सिस्टम सुरक्षित है',
    'admin.resolved': 'सुलझाया गया',

    'appointments.title': 'अपॉइंटमेंट',
    'appointments.subtitle_patient': 'अपने अपॉइंटमेंट प्रबंधित करें और नई कंसल्टेशन बुक करें',
    'appointments.subtitle_doctor': 'मरीजों के अपॉइंटमेंट देखें और प्रबंधित करें',
    'appointments.book': 'अपॉइंटमेंट बुक करें',
    'appointments.search_placeholder': 'अपॉइंटमेंट खोजें...',
    'appointments.all_status': 'सभी स्टेटस',
    'appointments.scheduled': 'निर्धारित',
    'appointments.in_progress': 'चल रहा है',
    'appointments.completed': 'पूर्ण',
    'appointments.cancelled': 'रद्द',
    'appointments.found': '{count} अपॉइंटमेंट{plural} मिले',
    'appointments.none_title': 'कोई अपॉइंटमेंट नहीं मिला',
    'appointments.none_patient': 'आपके पास अभी कोई अपॉइंटमेंट नहीं है। अपना पहला कंसल्टेशन बुक करें!',
    'appointments.none_filters': 'फ़िल्टर के अनुसार कोई अपॉइंटमेंट नहीं मिला।',
    'appointments.book_first': 'पहला अपॉइंटमेंट बुक करें',
    'appointments.duration': 'अवधि',
    'appointments.minutes': 'मिनट',
    'appointments.specialization': 'विशेषज्ञता',
    'appointments.symptoms': 'लक्षण',

    'ai.title': 'AI हेल्थ असिस्टेंट',
    'ai.subtitle': 'अपने व्यक्तिगत AI हेल्थ असिस्टेंट से बात करें',
    'ai.connected': 'कनेक्टेड',
    'ai.disconnected': 'डिस्कनेक्टेड',
    'ai.welcome_title': 'AuraMed AI में आपका स्वागत है',
    'ai.welcome_subtitle': 'अपनी स्वास्थ्य समस्या पर बातचीत शुरू करें',
    'ai.thinking': 'AI सोच रहा है...',
    'ai.placeholder': 'अपने लक्षण बताएं या स्वास्थ्य सवाल पूछें...',
    'ai.risk_assessment': 'जोखिम मूल्यांकन',
    'ai.separate_symptoms_hint': 'कई लक्षणों को कॉमा से अलग करें',
    'ai.analyze_symptoms': 'लक्षण विश्लेषण',

    'common.view_all': 'सभी देखें',
    'common.at': 'पर',
    'common.unread': 'अपठित',
    'common.mark_as_read': 'पढ़ा हुआ चिह्नित करें',
    'common.risk': 'जोखिम',
    'common.na': 'उपलब्ध नहीं',
    'common.bpm': 'बीपीएम',

    'patient.welcome': 'वापस स्वागत है, {name}!',
    'patient.subtitle': 'आपका AI हेल्थ असिस्टेंट आपकी वेलनेस यात्रा में मदद के लिए तैयार है।',
    'patient.quick.ai_chat': 'AI हेल्थ चैट',
    'patient.quick.ai_chat_sub': 'तुरंत स्वास्थ्य मार्गदर्शन पाएँ',
    'patient.quick.book_appointment': 'अपॉइंटमेंट बुक करें',
    'patient.quick.book_appointment_sub': 'शीर्ष डॉक्टरों के साथ समय तय करें',
    'patient.quick.emergency': 'आपातकाल',
    'patient.quick.emergency_sub': 'तत्काल कंसल्टेशन',
    'patient.recent_appointments': 'हालिया अपॉइंटमेंट',
    'patient.no_appointments': 'अभी कोई अपॉइंटमेंट नहीं',
    'patient.book_first': 'पहला अपॉइंटमेंट बुक करें',
    'patient.health_insights': 'स्वास्थ्य इनसाइट्स',
    'patient.no_insights': 'अभी कोई इनसाइट नहीं',
    'patient.no_insights_sub': 'व्यक्तिगत इनसाइट्स के लिए AI से चैट शुरू करें',

    'patient.health_score': 'स्वास्थ्य स्कोर',
    'patient.overall_health_score': 'कुल स्वास्थ्य स्कोर',
    'patient.stable': 'स्थिर',
    'patient.vital_signs': 'महत्वपूर्ण संकेत',
    'patient.blood_pressure': 'ब्लड प्रेशर',
    'patient.heart_rate': 'हृदय गति',
    'patient.bmi': 'बीएमआई',
    'patient.last_checkup': 'अंतिम जाँच',
    'patient.quick_stats': 'त्वरित आँकड़े',
    'patient.visits': 'विज़िट',
    'patient.upcoming': 'आगामी',
    'patient.medications': 'दवाएँ',
    'patient.conditions': 'स्थितियाँ',
    'patient.medications_allergies': 'दवाएँ और एलर्जी',
    'patient.current_medications': 'वर्तमान दवाएँ',
    'patient.no_medications_recorded': 'कोई दवा दर्ज नहीं',
    'patient.known_allergies': 'ज्ञात एलर्जी',
    'patient.no_allergies_recorded': 'कोई एलर्जी दर्ज नहीं',
    'patient.risk_factors': 'जोखिम कारक',
    'patient.no_risk_factors': 'कोई महत्वपूर्ण जोखिम कारक नहीं',

    'doctor.monthly_growth': 'मासिक वृद्धि',
    'doctor.new_patients_this_month': 'इस महीने नए मरीज',
    'doctor.growth_caption': 'मरीजों की वृद्धि अच्छी देखभाल का संकेत है',
    'doctor.todays_schedule': 'आज का शेड्यूल',
    'doctor.no_appointments_today': 'आज कोई अपॉइंटमेंट नहीं',
    'doctor.enjoy_day_off': 'आज आराम करें!',
    'doctor.performance_metrics': 'प्रदर्शन मेट्रिक्स',
    'doctor.view_all': 'सभी देखें',
    'doctor.age': 'उम्र',
    'doctor.symptoms': 'लक्षण',
    'doctor.patient_satisfaction': 'मरीज संतुष्टि',
    'doctor.response_time_score': 'प्रतिक्रिया समय स्कोर',
    'doctor.treatment_success_rate': 'उपचार सफलता दर',
    'doctor.avg_consultation_time': 'औसत परामर्श समय',
    'doctor.no_metrics': 'अभी कोई मेट्रिक्स नहीं',
    'doctor.no_metrics_sub': 'प्रदर्शन देखने के लिए कंसल्टेशन पूर्ण करें',
    'doctor.upcoming_appointments': 'आगामी अपॉइंटमेंट',
    'doctor.quick_actions': 'त्वरित क्रियाएँ',
    'doctor.ai_assistant': 'AI सहायक',
    'doctor.ai_assistant_sub': 'AI आधारित इनसाइट्स पाएँ',
    'doctor.manage_schedule': 'शेड्यूल प्रबंधित करें',
    'doctor.manage_schedule_sub': 'उपलब्धता अपडेट करें',
    'doctor.view_reports': 'रिपोर्ट देखें',
    'doctor.view_reports_sub': 'प्रदर्शन विश्लेषण'
  },
  ar: {
    'nav.dashboard': 'لوحة التحكم',
    'nav.ai_chat': 'محادثة الذكاء',
    'nav.appointments': 'المواعيد',
    'nav.find_doctor': 'ابحث عن طبيب',
    'nav.medicine': 'دواء 10 دقائق',
    'nav.video_call': 'مكالمة فيديو',
    'nav.family': 'العائلة',
    'nav.ai_insights': 'رؤى الذكاء',
    'nav.languages': 'اللغات',
    'nav.profile': 'الملف الشخصي',
    'nav.emergency_sos': 'طوارئ SOS',
    'nav.ambulance_dashboard': 'لوحة الإسعاف',
    'nav.prescriptions': 'الوصفات',
    'nav.freelance_patient': 'طبيب حر',
    'nav.freelance_doctor': 'وضع الطبيب الحر',

    'freelance.common.connected': 'متصل',
    'freelance.common.disconnected': 'غير متصل',
    'freelance.common.not_connected': 'غير متصل بالخادم',
    'freelance.common.location_required': 'الموقع مطلوب',
    'freelance.common.waiting_location': 'بانتظار الموقع...',

    'freelance.patient.title': 'طبيب حر (LIVE)',
    'freelance.patient.subtitle': 'اطلب طبيبًا قريبًا ويتم مطابقتك مباشرة.',
    'freelance.patient.map_title': 'عرض المنطقة المباشر',
    'freelance.patient.symptoms_label': 'الأعراض (اختياري)',
    'freelance.patient.symptoms_placeholder': 'مثال: حمى، سعال، صداع',
    'freelance.patient.symptoms_hint': 'نصيحة: افصل الأعراض بفواصل.',
    'freelance.patient.request': 'طلب طبيب',
    'freelance.patient.requesting': 'جارٍ الإرسال...',
    'freelance.patient.cancel': 'إلغاء',
    'freelance.patient.cancelling': 'جارٍ الإلغاء...',
    'freelance.patient.status_title': 'حالة الطلب',
    'freelance.patient.status_line': 'الحالة الحالية: {status}',
    'freelance.patient.no_active': 'لا يوجد طلب نشط. أنشئ طلبًا للمطابقة مع طبيب قريب.',
    'freelance.patient.flow_title': 'كيف يعمل',
    'freelance.patient.flow_copy': '1) شارك موقعك\n2) أرسل الطلب\n3) سيتم إشعار الأطباء القريبين\n4) يقبل طبيب ويتم تعيينه لك',
    'freelance.patient.nearby_line': 'الأطباء المتصلون بالقرب منك: {count}',
    'freelance.patient.request_created': 'تم إنشاء الطلب',
    'freelance.patient.request_failed': 'فشل إنشاء الطلب',
    'freelance.patient.cancelled': 'تم إلغاء الطلب',
    'freelance.patient.cancel_failed': 'فشل إلغاء الطلب',
    'freelance.patient.assigned': 'تم تعيين الطبيب',

    'freelance.doctor.title': 'وضع الطبيب الحر',
    'freelance.doctor.subtitle': 'كن متصلاً لتلقي طلبات قريبة وقبولها فورًا.',
    'freelance.doctor.location_title': 'موقعك المباشر',
    'freelance.doctor.go_online': 'اتصل',
    'freelance.doctor.go_offline': 'افصل',
    'freelance.doctor.online': 'متصل',
    'freelance.doctor.offline': 'غير متصل',
    'freelance.doctor.online_failed': 'فشل الاتصال',
    'freelance.doctor.offline_failed': 'فشل الفصل',
    'freelance.doctor.new_offer': 'طلب جديد قريب',
    'freelance.doctor.offers_title': 'الطلبات الواردة',
    'freelance.doctor.offers_count': '{count} طلب',
    'freelance.doctor.no_offers': 'لا توجد طلبات بعد. ابق متصلاً لتلقي العروض.',
    'freelance.doctor.offer_request': 'طلب {id}',
    'freelance.doctor.offer_distance': '{km} كم بعيد',
    'freelance.doctor.no_symptoms': 'لا توجد أعراض',
    'freelance.doctor.accept': 'قبول',
    'freelance.doctor.accept_failed': 'فشل قبول الطلب',
    'freelance.doctor.assigned': 'تم التعيين على الطلب',
    'freelance.doctor.active_title': 'تعيين نشط',
    'freelance.doctor.active_line': 'أنت معين للطلب {id}',
    'freelance.doctor.status_line': 'الحالة: {status}',
    'freelance.doctor.no_active': 'لا يوجد تعيين نشط',
    'freelance.doctor.complete': 'إنهاء',
    'freelance.doctor.completed': 'تم الإنهاء',
    'freelance.doctor.complete_failed': 'فشل إنهاء الطلب',

    'prescriptions.title': 'رفع وصفة طبية',
    'prescriptions.subtitle': 'ارفع وصفة (صورة/PDF) واستخرج الأدوية باستخدام الذكاء الاصطناعي.',
    'prescriptions.load_failed': 'فشل تحميل الوصفات المرفوعة',
    'prescriptions.upload': 'رفع',
    'prescriptions.uploading': 'جارٍ الرفع...',
    'prescriptions.upload_success': 'تم الرفع بنجاح',
    'prescriptions.upload_failed': 'فشل الرفع',
    'prescriptions.extract': 'استخراج',
    'prescriptions.extracting': 'جارٍ الاستخراج...',
    'prescriptions.extract_success': 'تم الاستخراج',
    'prescriptions.extract_failed': 'فشل الاستخراج',
    'prescriptions.delete': 'حذف',
    'prescriptions.delete_success': 'تم الحذف',
    'prescriptions.delete_failed': 'فشل الحذف',
    'prescriptions.view_file': 'عرض الملف',
    'prescriptions.empty_title': 'لا توجد وصفات مرفوعة بعد',
    'prescriptions.empty_subtitle': 'ارفع وصفة لاستخراج الأدوية والتعليمات.',
    'prescriptions.status.uploaded': 'تم الرفع',
    'prescriptions.status.extracting': 'جارٍ الاستخراج',
    'prescriptions.status.extracted': 'تم الاستخراج',
    'prescriptions.status.failed': 'فشل',
    'prescriptions.extracted_medicines': 'الأدوية المستخرجة',
    'prescriptions.no_medicines_found': 'لم يتم العثور على أدوية في هذا المستند',
    'prescriptions.unknown_medicine': 'دواء غير معروف',
    'prescriptions.no_details': 'لا توجد تفاصيل للجرعة/التكرار',
    'prescriptions.raw_extraction': 'نتيجة الاستخراج الخام',

    'medicine.title': 'توصيل الدواء خلال 10 دقائق',
    'medicine.subtitle': 'اطلب من صيدليات قريبة مع تتبّع مباشر ووقت وصول متوقع.',
    'medicine.load_failed': 'فشل تحميل المنتجات',
    'medicine.search_placeholder': 'ابحث عن دواء أو علامة أو فئة...',
    'medicine.filters': 'الفلاتر',
    'medicine.category': 'الفئة',
    'medicine.all_categories': 'كل الفئات',
    'medicine.rx_only': 'إظهار الأدوية التي تتطلب وصفة فقط',
    'medicine.tip': 'نصيحة: للحصول على أفضل ETA فعّل الموقع أثناء الدفع.',
    'medicine.empty_title': 'لا توجد منتجات',
    'medicine.empty_subtitle': 'جرّب تغيير البحث أو الفلاتر.',
    'medicine.rx': 'Rx',
    'medicine.in_stock': 'متوفر',
    'medicine.out_of_stock': 'غير متوفر',
    'medicine.eta_minutes': 'ETA {count} دقيقة',
    'medicine.add_to_cart': 'أضف للسلة',
    'medicine.cart_items': 'السلة ({count})',
    'medicine.cart': 'السلة',
    'medicine.checkout': 'الدفع',
    'medicine.checkout_subtitle': 'راجع السلة، أكد الموقع، ثم أنشئ الطلب.',
    'medicine.back_to_catalog': 'العودة للكتالوج',
    'medicine.cart_empty_title': 'سلتك فارغة',
    'medicine.cart_empty_subtitle': 'أضف عناصر لطلب توصيل خلال 10 دقائق.',
    'medicine.shop_now': 'تسوق الآن',
    'medicine.delivery_location': 'موقع التوصيل',
    'medicine.locating': 'جارٍ تحديد الموقع...',
    'medicine.refresh_location': 'تحديث',
    'medicine.location_missing': 'الموقع غير متاح',
    'medicine.delivery_address': 'عنوان التوصيل',
    'medicine.address_line1': 'المنزل / الشارع / المنطقة',
    'medicine.address_landmark': 'علامة مميزة (اختياري)',
    'medicine.address_city': 'المدينة',
    'medicine.address_state': 'الولاية',
    'medicine.address_pincode': 'الرمز البريدي',
    'medicine.address_note': 'ملاحظة التوصيل (اختياري)',
    'medicine.subtotal': 'المجموع الفرعي',
    'medicine.place_order': 'إنشاء الطلب',
    'medicine.placing_order': 'جارٍ إنشاء الطلب...',
    'medicine.checkout_note': 'ETA تقديري وقد يختلف حسب المخزون والمسافة.',
    'medicine.geo_not_supported': 'الموقع الجغرافي غير مدعوم',
    'medicine.geo_ok': 'تم حفظ الموقع',
    'medicine.geo_denied': 'تم رفض إذن الموقع',
    'medicine.fill_required': 'يرجى إدخال العنوان والسماح بالموقع',
    'medicine.order_created': 'تم إنشاء الطلب',
    'medicine.order_failed': 'فشل إنشاء الطلب',
    'medicine.order_load_failed': 'فشل تحميل الطلب',
    'medicine.order_not_found': 'الطلب غير موجود',
    'medicine.order_not_found_subtitle': 'قد لا يكون الطلب موجودًا أو قد لا تملك صلاحية الوصول.',
    'medicine.tracking_title': 'تتبّع الطلب مباشرة',
    'medicine.order_id': 'رقم الطلب: {id}',
    'medicine.refresh': 'تحديث',
    'medicine.refreshing': 'جارٍ التحديث...',
    'medicine.shop_more': 'تسوق المزيد',
    'medicine.status': 'الحالة',
    'medicine.status.pending': 'قيد الانتظار',
    'medicine.status.confirmed': 'تم التأكيد',
    'medicine.status.preparing': 'جارٍ التحضير',
    'medicine.status.out_for_delivery': 'خرج للتوصيل',
    'medicine.status.delivered': 'تم التوصيل',
    'medicine.status.cancelled': 'أُلغي',
    'medicine.cancel_order': 'إلغاء الطلب',
    'medicine.cancelling': 'جارٍ الإلغاء...',
    'medicine.order_cancelled': 'تم إلغاء الطلب',
    'medicine.cancel_failed': 'فشل إلغاء الطلب',
    'medicine.eta_line': 'التوصيل المتوقع خلال {minutes} دقيقة',
    'medicine.eta_by': 'بحلول {time}',
    'medicine.pharmacy': 'الصيدلية',
    'medicine.pharmacy_unknown': 'الصيدلية المعينة',
    'medicine.total': 'الإجمالي',
    'medicine.items': 'العناصر',
    'medicine.qty_price': '{qty} × ₹{price}',

    'auth.login': 'تسجيل الدخول',
    'auth.register': 'إنشاء حساب',
    'auth.logout': 'تسجيل الخروج',

    'i18n.language': 'اللغة',

    'loading.doctor_dashboard': 'جارٍ تحميل لوحة الطبيب...',
    'loading.admin_dashboard': 'جارٍ تحميل لوحة الإدارة...',
    'loading.appointments': 'جارٍ تحميل المواعيد...',

    'doctor.greeting': 'صباح الخير د. {name}!',
    'doctor.subtitle': 'لديك {count} مواعيد اليوم. مساعدك الذكي جاهز للمساعدة.',
    'doctor.todays_appointments': 'مواعيد اليوم',
    'doctor.total_patients': 'إجمالي المرضى',
    'doctor.satisfaction_score': 'درجة الرضا',
    'doctor.success_rate': 'معدل النجاح',
    'doctor.patient_demographics': 'خصائص المرضى',
    'doctor.common_conditions': 'الحالات الشائعة',
    'doctor.attention_required': 'يتطلب الانتباه',
    'doctor.critical_cases': 'حالات حرجة',
    'doctor.followups_required': 'متابعة مطلوبة',
    'doctor.patients': 'مرضى',

    'admin.title': 'لوحة الإدارة - {name}',
    'admin.subtitle': 'راقب صحة المنصة وأدر المستخدمين وتأكد من الأمان.',
    'admin.critical_alerts_title': 'تنبيهات حرجة تتطلب الانتباه',
    'admin.critical_alerts_subtitle': '{count} تنبيه{plural} حرج يحتاج إلى إجراء فوري.',
    'admin.total_users': 'إجمالي المستخدمين',
    'admin.verified_doctors': 'أطباء موثقون',
    'admin.pending_verifications': 'تحقق معلق',
    'admin.system_uptime': 'استقرار النظام',
    'admin.system_alerts': 'تنبيهات النظام',
    'admin.fraud_detection': 'كشف الاحتيال',
    'admin.view_all': 'عرض الكل',
    'admin.all_systems_operational': 'كل الأنظمة تعمل',
    'admin.no_alerts': 'لا توجد تنبيهات حالياً',
    'admin.no_fraud_alerts': 'لا توجد تنبيهات احتيال',
    'admin.system_secure': 'النظام آمن',
    'admin.resolved': 'تم الحل',

    'appointments.title': 'المواعيد',
    'appointments.subtitle_patient': 'أدر مواعيدك واحجز استشارات جديدة',
    'appointments.subtitle_doctor': 'اعرض وأدر مواعيد المرضى',
    'appointments.book': 'حجز موعد',
    'appointments.search_placeholder': 'ابحث عن المواعيد...',
    'appointments.all_status': 'كل الحالات',
    'appointments.scheduled': 'مجدول',
    'appointments.in_progress': 'قيد التنفيذ',
    'appointments.completed': 'مكتمل',
    'appointments.cancelled': 'ملغي',
    'appointments.found': 'تم العثور على {count} موعد{plural}',
    'appointments.none_title': 'لا توجد مواعيد',
    'appointments.none_patient': 'لا يوجد لديك مواعيد بعد. احجز أول استشارة!',
    'appointments.none_filters': 'لا توجد مواعيد تطابق عوامل التصفية.',
    'appointments.book_first': 'احجز أول موعد',
    'appointments.duration': 'المدة',
    'appointments.minutes': 'دقيقة',
    'appointments.specialization': 'التخصص',
    'appointments.symptoms': 'الأعراض',

    'ai.title': 'مساعد الصحة الذكي',
    'ai.subtitle': 'تحدث مع مساعدك الصحي الذكي',
    'ai.connected': 'متصل',
    'ai.disconnected': 'غير متصل',
    'ai.welcome_title': 'مرحباً بك في AuraMed AI',
    'ai.welcome_subtitle': 'ابدأ محادثة حول مخاوفك الصحية',
    'ai.thinking': 'الذكاء يفكر...',
    'ai.placeholder': 'صف الأعراض أو اسأل سؤالاً صحياً...',
    'ai.risk_assessment': 'تقييم المخاطر',
    'ai.separate_symptoms_hint': 'افصل بين الأعراض بفواصل',
    'ai.analyze_symptoms': 'تحليل الأعراض',

    'common.view_all': 'عرض الكل',
    'common.at': 'في',
    'common.unread': 'غير مقروء',
    'common.mark_as_read': 'وضع علامة كمقروء',
    'common.risk': 'مخاطر',
    'common.na': 'غير متوفر',
    'common.bpm': 'نبضة/د',

    'patient.welcome': 'مرحباً بعودتك، {name}!',
    'patient.subtitle': 'مساعدك الصحي بالذكاء الاصطناعي هنا لمساعدتك في رحلة العافية.',
    'patient.quick.ai_chat': 'محادثة الصحة الذكية',
    'patient.quick.ai_chat_sub': 'احصل على إرشادات صحية فورية',
    'patient.quick.book_appointment': 'حجز موعد',
    'patient.quick.book_appointment_sub': 'حدد موعداً مع أفضل الأطباء',
    'patient.quick.emergency': 'طوارئ',
    'patient.quick.emergency_sub': 'استشارة عاجلة',
    'patient.recent_appointments': 'المواعيد الأخيرة',
    'patient.no_appointments': 'لا توجد مواعيد بعد',
    'patient.book_first': 'احجز أول موعد',
    'patient.health_insights': 'رؤى الصحة',
    'patient.no_insights': 'لا توجد رؤى بعد',
    'patient.no_insights_sub': 'ابدأ الدردشة مع الذكاء للحصول على رؤى مخصصة',

    'patient.health_score': 'درجة الصحة',
    'patient.overall_health_score': 'درجة الصحة العامة',
    'patient.stable': 'مستقر',
    'patient.vital_signs': 'العلامات الحيوية',
    'patient.blood_pressure': 'ضغط الدم',
    'patient.heart_rate': 'معدل ضربات القلب',
    'patient.bmi': 'مؤشر كتلة الجسم',
    'patient.last_checkup': 'آخر فحص',
    'patient.quick_stats': 'إحصاءات سريعة',
    'patient.visits': 'زيارات',
    'patient.upcoming': 'قادم',
    'patient.medications': 'الأدوية',
    'patient.conditions': 'الحالات',
    'patient.medications_allergies': 'الأدوية والحساسية',
    'patient.current_medications': 'الأدوية الحالية',
    'patient.no_medications_recorded': 'لا توجد أدوية مسجلة',
    'patient.known_allergies': 'الحساسية المعروفة',
    'patient.no_allergies_recorded': 'لا توجد حساسية مسجلة',
    'patient.risk_factors': 'عوامل الخطر',
    'patient.no_risk_factors': 'لا توجد عوامل خطر مهمة',

    'doctor.monthly_growth': 'النمو الشهري',
    'doctor.new_patients_this_month': 'مرضى جدد هذا الشهر',
    'doctor.growth_caption': 'نمو قاعدة المرضى يدل على جودة الرعاية',
    'doctor.todays_schedule': 'جدول اليوم',
    'doctor.no_appointments_today': 'لا توجد مواعيد اليوم',
    'doctor.enjoy_day_off': 'استمتع بيومك!',
    'doctor.performance_metrics': 'مقاييس الأداء',
    'doctor.view_all': 'عرض الكل',
    'doctor.age': 'العمر',
    'doctor.symptoms': 'الأعراض',
    'doctor.patient_satisfaction': 'رضا المرضى',
    'doctor.response_time_score': 'درجة سرعة الاستجابة',
    'doctor.treatment_success_rate': 'معدل نجاح العلاج',
    'doctor.avg_consultation_time': 'متوسط مدة الاستشارة',
    'doctor.no_metrics': 'لا توجد مقاييس بعد',
    'doctor.no_metrics_sub': 'أكمل الاستشارات لعرض أدائك',
    'doctor.upcoming_appointments': 'المواعيد القادمة',
    'doctor.quick_actions': 'إجراءات سريعة',
    'doctor.ai_assistant': 'مساعد الذكاء',
    'doctor.ai_assistant_sub': 'احصل على رؤى مدعومة بالذكاء',
    'doctor.manage_schedule': 'إدارة الجدول',
    'doctor.manage_schedule_sub': 'تحديث التوفر',
    'doctor.view_reports': 'عرض التقارير',
    'doctor.view_reports_sub': 'تحليلات الأداء'
  }
};

function safeStorageGet(key: string): string | null {
  try {
    return window.localStorage.getItem(key);
  } catch {
    return null;
  }
}

function safeStorageSet(key: string, value: string) {
  try {
    window.localStorage.setItem(key, value);
  } catch {
    // ignore
  }
}

function getDir(lang: LanguageCode): 'ltr' | 'rtl' {
  return lang === 'ar' ? 'rtl' : 'ltr';
}

type I18nContextType = {
  language: LanguageCode;
  dir: 'ltr' | 'rtl';
  setLanguage: (lang: LanguageCode) => void;
  t: (key: string, vars?: Record<string, string | number>) => string;
  available: { code: LanguageCode; label: string }[];
};

const I18nContext = createContext<I18nContextType | undefined>(undefined);

export const I18nProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [language, setLanguageState] = useState<LanguageCode>(() => {
    const saved = safeStorageGet('auramed_language');
    if (saved === 'en' || saved === 'hi' || saved === 'ar') return saved;
    return 'en';
  });

  const dir = useMemo(() => getDir(language), [language]);

  useEffect(() => {
    safeStorageSet('auramed_language', language);
    document.documentElement.lang = language;
    document.documentElement.dir = dir;
  }, [dir, language]);

  const value = useMemo<I18nContextType>(() => {
    const dict = dictionaries[language] || dictionaries.en;
    return {
      language,
      dir,
      setLanguage: (lang) => setLanguageState(lang),
      t: (key, vars) => {
        const template = dict[key] || dictionaries.en[key] || key;
        if (!vars) return template;
        return template.replace(/\{(\w+)\}/g, (_m, k) => {
          const v = (vars as any)[k];
          return v === undefined || v === null ? `{${k}}` : String(v);
        });
      },
      available: [
        { code: 'en', label: 'English' },
        { code: 'hi', label: 'हिंदी' },
        { code: 'ar', label: 'العربية' }
      ]
    };
  }, [dir, language]);

  return <I18nContext.Provider value={value}>{children}</I18nContext.Provider>;
};

export const useI18n = () => {
  const ctx = useContext(I18nContext);
  if (!ctx) throw new Error('useI18n must be used within an I18nProvider');
  return ctx;
};
